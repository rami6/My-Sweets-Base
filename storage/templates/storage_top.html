{% extends "base.html" %}

{% block extra_meta %}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
{% endblock extra_meta %}

{% block content %}
<div id="vue-el-s">
    <form v-on:submit.prevent="addIngredient()" class="form-inline m-2">
        <input
            type="text"
            class="form-control"
            id="name"
            placeholder="Name"
            v-model="newIngredient.name">

        <div class="form-group ml-2">
            <label for="expiration_date">Expiration Date: </label>
            <input
                type="date"
                class="form-control"
                id="expiration_date"
                v-model="newIngredient.expiration_date">
        </div>
        <button type="submit" class="btn btn-dark ml-1">Add</button>
    </form>
    <form v-on:submit.prevent="searchIngredients(word)" class="form-inline mt-2 ml-2" style="display: inline-block">
        <input
            type="text"
            class="form-control"
            id="word"
            placeholder="Search"
            v-model="word">
    </form>
    <span v-on:click="clearSearch()" style="color: #D38E6C" class="align-bottom">Clear</span>
    <table class="table mt-4">
        <thead>
          <tr>
            <th scope="col" v-on:click="switchSort('name')">Name</th>
            <th scope="col" v-on:click="switchSort('expiration')">Expiration Date</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
            <tr v-for="ingredient in ingredients">
                <td v-on:dblclick="getIngredient(ingredient.id, 'edit')">${ingredient.name}</td>
                <td v-on:dblclick="getIngredient(ingredient.id, 'edit')"><span v-if="ingredient.expiration_date">${ingredient.expiration_date}</span></td>
                <td>
                {% load static %}
                <img v-if="ingredient.is_expired" src='{% static "image/caution-mark.png" %}' alt="expired" class="float-left" height="23px" />
                </td>
                <td v-on:click="getIngredient(ingredient.id, 'delete')" class="text-secondary">&times;</td>
            </tr>
        </tbody>
    </table>

    {% include 'snippets/storage_modals.html' %}

</div>
{% endblock content %}

{% block extra_js %}
    <script type="text/javascript">
        {% include 'snippets/storage.js' %}
    </script>
{% endblock extra_js %}
